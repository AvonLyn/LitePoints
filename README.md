# LitePoints 积分管理

LitePoints 是一个“打开即用”的本地积分账本：无需安装、无需联网、无需登录，仅一页文件即可记录你的得分、税收与活动。它足够轻量，只有 `index.html + app.js + styles.css`，同时又足够实用——支持月/周视图统计、每日明细、类别汇总和一键编辑条目，适合长期自我管理与复盘。

## 功能概览
- 得分项、税收项、活动项三种类型，税收自动计为负值
- 左侧条目支持滚动，条目再多也不撑爆页面
- 月视图日历、周视图统计（周一至周日）
- 周视图显示各大类得分汇总，便于控制税收节奏
- 右侧显示当天明细、当天/本周汇总
- 内置数据 + 本地自定义配置（保存在浏览器）
- 导出/导入个人备份，自动备份保留最近 3 份

## 快速开始
1. 直接打开 `index.html`（离线可用）
2. 左侧选择类型 → 大类 → 条目
3. 设置倍数与日期，点击“记录本次”
4. 中间可在“月视图/周视图”间切换

## 使用指南
### 记录一条积分
- 选择得分/税收/活动
- 选择大类与条目
- 输入倍数与日期
- 点击“记录本次”

### 视图切换
- 月视图：按月展示每天得分/税收
- 周视图：按周展示每天得分/税收，并在下方汇总各得分大类

### 管理选项（编辑大类和条目）
- 点击左侧“管理选项”
- 选择要编辑的类型（得分/税收/活动）
- 可新增/修改/删除大类与条目
- 修改会自动保存到本地浏览器

### 活动项
- 用于“特殊活动”的额外加分
- 和得分一样计入总分统计
- 可在“管理选项”里自由维护

### 备份与恢复
- 顶部点击“设置备份文件夹”，建议选择项目内的 `user_data/`
- “导出备份”可手动生成备份文件
- 每次记录/编辑都会自动备份，默认保留 3 份，超过会覆盖最早的备份
- 备份针对当前被管理人，切换成员后可分别导出/导入
- “导入备份”会覆盖当前被管理人的记录与自定义条目

## 数据与存储
- 记录数据保存在浏览器 `localStorage`，清缓存会丢失（每个被管理人独立）
- 备份文件保存在你选择的备份文件夹（推荐 `user_data/`）
- `user_data/` 已加入 `.gitignore`，避免备份文件被提交
- 默认条目来自 `data/` 下的 JSON
- 一旦在“管理选项”里编辑，页面会优先使用本地自定义数据

**高级说明**
- 记录数据键：`litepoints_entries_v1__{personId}`
- 自定义条目键：`litepoints_catalog_v1__{personId}`
- 被管理人列表键：`litepoints_people_v1`

**关于 JSON 数据**
- 直接用文件方式打开时，部分浏览器可能阻止 `fetch` 读取 JSON
- 如需强制使用 `data/*.json`，建议用本地静态服务器打开目录

## 目录结构
- `index.html` 页面结构
- `styles.css` 样式
- `app.js` 核心逻辑
- `data/score_items.json` 得分项数据
- `data/tax_items.json` 税收项数据
- `data/event_items.json` 活动项数据
- `user_data/` 个人备份文件夹（已忽略）
- `积分管理规划表-得分项.md` 得分规划表
- `积分管理规划表-税收项.md` 税收规划表

## 常见问题
- 看不到 JSON 数据？
  可能是浏览器限制本地 `fetch`，用本地服务器打开目录即可。
- 换浏览器或清缓存后数据没了？
  数据存于本地 `localStorage`，需要手动备份或导出。
- 自动备份不生效？
  请先设置备份文件夹，并使用支持 File System Access API 的浏览器打开（推荐 Chromium 系列）。
